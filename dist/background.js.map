{"version":3,"sources":["background.js"],"names":["previousId","chrome","runtime","onInstalled","addListener","console","log","onMessage","request","sender","sendResponse","type","tts","speak","text","onEvent","event","charIndex","tabs","query","active","currentWindow","sendMessage","id","trigger","pause","resume"],"mappings":";AAIE,IAAIA,EAJNC,OAAOC,QAAQC,YAAYC,YAAY,KACnCC,QAAQC,IAAI,wDAKdL,OAAOC,QAAQK,UAAUH,YAAY,SAASI,EAASC,EAAQC,GAExC,SAAjBF,EAAQG,KAGVV,OAAOW,IAAIC,MACTL,EAAQM,KACR,CACEC,QAAS,SAASC,GAChBX,QAAQC,IAAI,SAAWU,EAAML,KAAO,gBAAkBK,EAAMC,WAM1C,OAAdD,EAAML,OAERN,QAAQC,IAAI,mBAEZL,OAAOiB,KAAKC,MAAM,CAAEC,QAAQ,EAAMC,eAAe,GAASH,IACxDjB,OAAOiB,KAAKI,YAAYJ,EAAK,GAAGK,GAAI,CAAEC,QAAS,gBAGjC,eAAdR,EAAML,OACRX,EAAaQ,EAAQe,GAErBtB,OAAOiB,KAAKC,MAAM,CAAEC,QAAQ,EAAMC,eAAe,GAASH,IACxDjB,OAAOiB,KAAKI,YAAYJ,EAAK,GAAGK,GAAI,CAAEC,QAAS,cAAexB,WAAAA,UAU/C,UAAjBQ,EAAQG,MAGhBN,QAAQC,IAAI,mBACZL,OAAOW,IAAIa,SAGc,WAAjBjB,EAAQG,OAEhBN,QAAQC,IAAI,uCACZL,OAAOW,IAAIc","file":"background.js","sourceRoot":"../src","sourcesContent":["chrome.runtime.onInstalled.addListener(() => {\n    console.log('[background] chrome.runtime.onInstalled initialize'); \n  });\n\n  let previousId;\n\n  chrome.runtime.onMessage.addListener(function(request, sender, sendResponse) {\n\n    if (request.type === 'play') {\n\n      \n      chrome.tts.speak(\n        request.text,\n        {\n          onEvent: function(event) {\n            console.log('Event ' + event.type + ' at position ' + event.charIndex);\n\n            // console.log(event.type);\n\n\n\n            if (event.type == 'end') {\n\n              console.log(\"THis just ended\");\n\n              chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n                chrome.tabs.sendMessage(tabs[0].id, { trigger: \"finished\" });\n              });              \n            }\n            if (event.type == 'interrupted') {\n              previousId = request.id\n\n              chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n                chrome.tabs.sendMessage(tabs[0].id, { trigger: \"interrupted\", previousId });\n              });              \n                \n            }\n          }\n        },\n      );\n\n\n\n    } else if(request.type === 'pause') {\n\n\n      console.log(\"This was paused\");\n      chrome.tts.pause();\n\n\n    } else if(request.type === 'resume') {\n\n      console.log(\"this prompt is to resume the speech\");\n      chrome.tts.resume();\n\n\n    }\n\n  })\n  "]}